// Generated by CoffeeScript 1.7.1
(function() {
  var Booklist, Timetable;

  Timetable = (function() {
    function Timetable(theweek, weekDays, theBooklist) {
      this.theweek = theweek;
      this.weekDays = weekDays;
      this.theBooklist = theBooklist;
      this.periodIds = ["period1", "period2", "period3", "period4", "period5", "period7", "period8", "period9", "after-school"];
    }

    Timetable.prototype.setDay = function(dayIdx) {
      var dayInfo, i, subject, _i, _len;
      this.dayIdx = dayIdx;
      dayInfo = this.theweek[dayIdx];
      for (i = _i = 0, _len = dayInfo.length; _i < _len; i = ++_i) {
        subject = dayInfo[i];
        this.showPeriod(this.periodIds[i], this.periodIds[i + 1], subject, dayInfo[i + 1]);
      }
      $(".daytitle").text(this.weekDays[dayIdx]);
      return this.theBooklist.showbooks(dayInfo);
    };

    Timetable.prototype.nextDay = function() {
      this.dayIdx = this.dayIdx + 1;
      if (this.dayIdx === 5) {
        this.dayIdx = 4;
      }
      return this.setDay(this.dayIdx);
    };

    Timetable.prototype.prevDay = function() {
      this.dayIdx = this.dayIdx - 1;
      if (this.dayIdx === -1) {
        this.dayIdx = 0;
      }
      return this.setDay(this.dayIdx);
    };

    Timetable.prototype.showPeriod = function(id, nextId, subject, nextSubject) {
      $("#" + id).text(subject);
      if (subject === nextSubject) {
        $("#" + id).attr("class", "alt");
        $("#" + id).attr("rowspan", "2");
        return $("#" + nextId).hide();
      } else {
        $("#" + id).attr("rowspan", "1");
        $("#" + nextId).show();
        return $("#" + id).attr("class", "");
      }
    };

    return Timetable;

  })();

  Booklist = (function() {
    function Booklist(theweek, thebooks) {
      this.theweek = theweek;
      this.thebooks = thebooks;
    }

    Booklist.prototype.showbooks = function(dayInfo) {
      var book, i, subject, _i, _len, _results;
      _results = [];
      for (i = _i = 0, _len = dayInfo.length; _i < _len; i = ++_i) {
        subject = dayInfo[i];
        if (subject in this.thebooks) {
          _results.push((function() {
            var _j, _len1, _ref, _results1;
            _ref = this.thebooks[subject];
            _results1 = [];
            for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
              book = _ref[_j];
              _results1.push(this.showbook(book));
            }
            return _results1;
          }).call(this));
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    };

    Booklist.prototype.showbook = function(book) {
      return $('#booklist').append(book);
    };

    return Booklist;

  })();

  $(document).ready(function() {
    var booklist, books, friday, monday, thursday, timetable, tuesday, wednesday, week, weekDayNames;
    monday = ["English", "Biology", "Biology", "Maths", "Maths", "German", "Art & Design", "Art & Design", "Free Time"];
    tuesday = ["Citizenship", "Geography", "Geography", "Physics", "Physics", "Maths", "German", "English", "Free Time"];
    wednesday = ["P & R", "P & R", "Music", "PE", "PE", "Maths", "Physics", "Physics", "Riding"];
    thursday = ["German", "Music", "Music", "English", "English", "Art & Design", "Art & Design", "Tennis", "Tennis"];
    friday = ["Geography", "Geography", "Computing", "Maths", "English", "Biology", "Biology", "German", "Free Time"];
    week = [monday, tuesday, wednesday, thursday, friday];
    weekDayNames = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
    books = {
      "English": ["Lined Paper", "Roll of Thunder, Hear My Cry"],
      "Maths": ["Jotter", "SSM R2 Textbook"],
      "German": ["Work Jotter", "Dictionary", "ECHO 2 Workbook", "ECHO 2 Textbook", "Vocab Jotter"]
    };
    booklist = new Booklist(week, books);
    timetable = new Timetable(week, weekDayNames, booklist);
    timetable.setDay(0);
    $("#timetable").on("swipeleft", function() {
      return timetable.nextDay();
    });
    return $("#timetable").on("swiperight", function() {
      return timetable.prevDay();
    });
  });

}).call(this);
